<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tunisie â€“ Carte dÃ©mographique</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Mobile control buttons -->
  <button id="toggleSidebar" class="toggle-sidebar" title="Afficher/masquer infos">â®</button>
  <button id="toggleFilters" class="toggle-filters" title="Filtres">â˜°</button>

  <!-- Loader overlay -->
 <!-- 1ï¸âƒ£  Overlay loader -->
<div id="loader" class="loader hidden">
  <div class="spinner"></div>
  <div class="loading-text">Chargementâ€¦</div>
</div>

<!-- 2ï¸âƒ£  Classe Â« resizable Â» sur #charts -->
<div id="layout">
  <div id="charts" class="resizable">
    <div id="info">â€¦</div>
  </div>
  <div id="map"></div>
</div>

  
<!-- Filtres -->
  <div id="filters">
    <div class="filter-group">
      <label for="levelSel">Niveau</label>
      <select id="levelSel">
        <option value="gov">ğŸ›ï¸ Gouvernorats</option>
        <option value="del">ğŸ˜ï¸ DÃ©lÃ©gations</option>
        <option value="sec">ğŸšï¸ Secteurs</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="colorSel">Couleur</label>
      <select id="colorSel">
        <option value="density">ğŸŒ DensitÃ©</option>
        <option value="age">ğŸ‘µ Ã‚ge mÃ©dian</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="ageFil">Focus dÃ©mographique</label>
      <select id="ageFil">
        <option value="">â€“ Aucun â€“</option>
        <option value="jeunes">ğŸ§’ MajoritÃ© jeunes</option>
        <option value="vieux">ğŸ‘´ MajoritÃ© seniors</option>
        <option value="femmes">ğŸ‘© MajoritÃ© fÃ©minine</option>
        <option value="hommes">ğŸ‘¨ MajoritÃ© masculine</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="searchInput">Recherche</label>
      <input id="searchInput" list="searchList" placeholder="ğŸ” Rechercherâ€¦" autocomplete="off">
      <datalist id="searchList"></datalist>
    </div>

    <button id="resetFil" title="RÃ©initialiser les filtres">â™»ï¸ RÃ©initialiser</button>
    <div class="filter-group filter-schools">
  <label style="display:flex;align-items:center;gap:6px;font-weight:600;">
    <input type="checkbox" id="schoolsAll"> Ã‰tablissements scolaires
  </label>
  <div id="schoolTypes" style="display:flex;gap:8px;margin-left:6px;flex-wrap:wrap;">
    <label style="display:flex;align-items:center;gap:4px;color:#1f77b4;">
      <input type="checkbox" class="schoolTypeChk" data-type="E.PRIMAIRE"> Prim.
    </label>
    <label style="display:flex;align-items:center;gap:4px;color:#ff7f0e;">
      <input type="checkbox" class="schoolTypeChk" data-type="E.PREP"> CollÃ¨ge
    </label>
    <label style="display:flex;align-items:center;gap:4px;color:#2ca02c;">
      <input type="checkbox" class="schoolTypeChk" data-type="E.PREP.TECH"> PrÃ©paÂ Tech
    </label>
    <label style="display:flex;align-items:center;gap:4px;color:#d62728;">
      <input type="checkbox" class="schoolTypeChk" data-type="LYCEE"> LycÃ©e
    </label>
  </div>
</div></div>


  <script type="module" src="js/main.js"></script>

<button id="toggleLegend" class="toggle-legend" title="LÃ©gende">ğŸ“Š</button>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const btnLegend = document.getElementById('toggleLegend');
  if(btnLegend){
    btnLegend.addEventListener('click', () => {
      document.body.classList.toggle('hide-legend');
    });
  }
});
</script>

</body>
</html>
